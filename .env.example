# =============================================================================
# NEON Platform Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control
# =============================================================================

# -----------------------------------------------------------------------------
# Environment
# -----------------------------------------------------------------------------
NODE_ENV=development
LOG_LEVEL=debug

# -----------------------------------------------------------------------------
# API Server
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=3001
API_URL=http://localhost:3001

# CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:3002

# -----------------------------------------------------------------------------
# Web Client
# -----------------------------------------------------------------------------
WEB_PORT=3000
WEB_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# Admin Dashboard
# -----------------------------------------------------------------------------
ADMIN_PORT=3002
ADMIN_URL=http://localhost:3002

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://neon:neon_dev_password@localhost:5432/neon?schema=public

# Connection pool settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=

# Prefix for all keys (useful for shared Redis)
REDIS_PREFIX=neon:

# -----------------------------------------------------------------------------
# JWT & Sessions
# -----------------------------------------------------------------------------
# Generate with: openssl rand -base64 64
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# Session cookie settings
SESSION_SECRET=your-session-secret-change-in-production
SESSION_COOKIE_NAME=neon.sid
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_MAX_AGE=604800000

# -----------------------------------------------------------------------------
# Encryption
# -----------------------------------------------------------------------------
# 32-byte key for AES-256 encryption (for sensitive data at rest)
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=your-32-byte-encryption-key-in-hex-format

# -----------------------------------------------------------------------------
# S3-Compatible Storage (Garage/MinIO/S3)
# -----------------------------------------------------------------------------
S3_ENDPOINT=http://localhost:3900
S3_REGION=garage
S3_ACCESS_KEY=GK_DEV_ACCESS_KEY
S3_SECRET_KEY=GK_DEV_SECRET_KEY
S3_BUCKET_MEDIA=neon-media
S3_BUCKET_BACKUPS=neon-backups
S3_BUCKET_RECORDINGS=neon-recordings

# Use path-style URLs (required for Garage/MinIO)
S3_FORCE_PATH_STYLE=true

# -----------------------------------------------------------------------------
# LiveKit (Video/Audio)
# -----------------------------------------------------------------------------
LIVEKIT_URL=ws://localhost:7880
LIVEKIT_API_URL=http://localhost:7880
LIVEKIT_API_KEY=devkey
LIVEKIT_API_SECRET=your-livekit-secret-change-in-production

# Recording settings
LIVEKIT_RECORDING_ENABLED=true

# -----------------------------------------------------------------------------
# Push Notifications (Web Push / VAPID)
# -----------------------------------------------------------------------------
# Generate with: npx web-push generate-vapid-keys
VAPID_PUBLIC_KEY=your-vapid-public-key
VAPID_PRIVATE_KEY=your-vapid-private-key
VAPID_SUBJECT=mailto:admin@yourorg.com

# -----------------------------------------------------------------------------
# Email (SMTP) - Organization Level Override Available
# -----------------------------------------------------------------------------
# Default SMTP settings (can be overridden per organization)
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=
SMTP_FROM_NAME=NEON
SMTP_FROM_EMAIL=neon@localhost

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_LOGIN_MAX=5
RATE_LIMIT_LOGIN_LOCKOUT_MS=900000

# -----------------------------------------------------------------------------
# File Upload Limits
# -----------------------------------------------------------------------------
# Maximum file size in bytes (default 1GB)
MAX_FILE_SIZE=1073741824

# Maximum request body size
MAX_BODY_SIZE=50mb

# -----------------------------------------------------------------------------
# Compliance
# -----------------------------------------------------------------------------
# Mode: hipaa | gdpr (immutable after first run)
COMPLIANCE_MODE=hipaa

# Audit log retention in days (minimum 2190 for HIPAA = 6 years)
AUDIT_RETENTION_DAYS=2190

# GDPR purge grace period in days (only applies in GDPR mode)
GDPR_PURGE_GRACE_DAYS=30

# -----------------------------------------------------------------------------
# Federation
# -----------------------------------------------------------------------------
# Enable cross-instance federation
FEDERATION_ENABLED=false

# This instance's federation identifier
FEDERATION_INSTANCE_ID=
FEDERATION_INSTANCE_URL=

# Federation signing key (Ed25519)
# Generate with: openssl genpkey -algorithm Ed25519 -out federation.pem
FEDERATION_PRIVATE_KEY_PATH=

# -----------------------------------------------------------------------------
# Background Jobs
# -----------------------------------------------------------------------------
# Enable background job processing
JOBS_ENABLED=true

# Backup schedule (cron format)
BACKUP_SCHEDULE=0 2 * * *

# Purge schedule for soft-deleted items (cron format)
PURGE_SCHEDULE=0 3 * * *

# -----------------------------------------------------------------------------
# Observability
# -----------------------------------------------------------------------------
# OpenTelemetry (optional)
OTEL_ENABLED=false
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318

# Sentry (optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# -----------------------------------------------------------------------------
# Development Only
# -----------------------------------------------------------------------------
# Enable debug endpoints
DEBUG_ENABLED=true

# Skip email verification in development
SKIP_EMAIL_VERIFICATION=true

# Default super admin (created on first run)
SUPER_ADMIN_EMAIL=admin@localhost
SUPER_ADMIN_PASSWORD=admin123

# Trust proxy (set to true behind reverse proxy)
TRUST_PROXY=false
